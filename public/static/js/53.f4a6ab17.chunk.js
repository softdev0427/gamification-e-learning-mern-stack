(this["webpackJsonp@devias-io/material-kit-pro-react"]=this["webpackJsonp@devias-io/material-kit-pro-react"]||[]).push([[53],{1105:function(e,a,t){"use strict";t.r(a);var r=t(30),n=t.n(r),c=t(54),o=t(0),l=t.n(o),i=t(35),s=t(17),u=t(272),m=t(280),d=t(155),p=t(282),f=t.n(p),b=t(912),h=t(887),E=t(37),v=t(23),g=t(4),O=t(79),j=t(910),y=t(850),k=t(204),x=t(1098),w=Object(u.a)((function(e){return{root:{display:"flex",alignItems:"center",height:64,paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}}}));var N=function(e){var a=e.className,t=Object(E.a)(e,["className"]),r=w();return l.a.createElement("div",Object.assign({className:Object(g.a)(r.root,a)},t),l.a.createElement(O.a,{variant:"h3",color:"textPrimary"},"Chats"),l.a.createElement(j.a,{flexGrow:1}),l.a.createElement(y.a,{component:v.a,to:"/app/courses/chat"},l.a.createElement(k.a,{fontSize:"small"},l.a.createElement(x.a,null))))},C=t(843),S=t(842),P=t(891),R=t(913),D=t(892),M=t(1146),W=t(1099),K=Object(u.a)((function(e){return{root:{},searchContainer:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},contactAvatar:{height:32,width:32}}}));var T=function(e){var a=e.className,t=Object(E.a)(e,["className"]),r=K(),n=Object(s.c)((function(e){return e.chat})).contacts;return l.a.createElement("div",Object.assign({className:Object(g.a)(r.root,a)},t),l.a.createElement("div",{className:r.searchContainer},l.a.createElement(j.a,{mt:2},l.a.createElement(O.a,{variant:"h6",color:"textSecondary"},"Contacts"),l.a.createElement(C.a,null,n.map((function(e){return l.a.createElement(S.a,{button:!0,component:v.a,key:e.id,to:"/app/courses/chat/".concat(e.id)},l.a.createElement(P.a,null,l.a.createElement(R.a,{src:e.avatar,className:r.contactAvatar})),l.a.createElement(D.a,{primary:e.username,primaryTypographyProps:{noWrap:!0,variant:"h6",color:"textPrimary"}}),l.a.createElement(D.a,{primary:e.role,primaryTypographyProps:{noWrap:!0,variant:"h6",color:"textPrimary"}}),e.new&&l.a.createElement(M.a,{size:"small",icon:l.a.createElement(W.a,{color:"red",fontWeight:"bold"})}))}))))))},U=Object(u.a)((function(){return{drawerDesktopRoot:{width:280,flexShrink:0},drawerDesktopPaper:{position:"relative"},drawerMobilePaper:{position:"relative",width:280},drawerMobileBackdrop:{position:"absolute"}}}));var z=function(e){var a=e.containerRef,t=U(),r=Object(s.b)(),n=Object(i.h)(),c=Object(s.c)((function(e){return e.chat})).sidebarOpen;Object(o.useEffect)((function(){c&&r(Object(d.e)())}),[n.pathname]);var u=l.a.createElement("div",null,l.a.createElement(N,null),l.a.createElement(f.a,{options:{suppressScrollX:!0}},l.a.createElement(T,null)));return l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,{smDown:!0},l.a.createElement(h.a,{variant:"permanent",classes:{root:t.drawerDesktopRoot,paper:t.drawerDesktopPaper}},u)),l.a.createElement(b.a,{mdUp:!0},l.a.createElement(h.a,{variant:"temporary",open:c,onClose:function(){r(Object(d.e)())},classes:{paper:t.drawerMobilePaper},style:{position:"absolute",zIndex:1200},BackdropProps:{classes:{root:t.drawerMobileBackdrop}},ModalProps:{container:function(){return a.current}}},u)))},B=t(886),G=t(25),A=t(112),I=t.n(A),L=t(1092),_=t(872);var J=Object(u.a)((function(e){return{root:{marginBottom:e.spacing(2),display:"flex"},avatar:{height:32,width:32},image:{cursor:"pointer",height:"auto",maxWidth:"100%",width:380}}}));var X=function(e){var a=e.className,t=e.thread,r=e.name,n=e.avatar,c=Object(E.a)(e,["className","thread","name","avatar"]),i=J(),u=Object(o.useState)(null),m=Object(G.a)(u,2),d=m[0],p=m[1],f=Object(s.c)((function(e){return function(e,a,t,r){var n=e.account.user;return a?{avatar:n.avatar,name:"Me",type:"user"}:{avatar:r,name:t,type:"contact"}}(e,t.send,r,n)}));return l.a.createElement("div",Object.assign({className:Object(g.a)(i.root,a)},c),l.a.createElement(j.a,{display:"flex",maxWidth:500,ml:"user"===f.type?"auto":0},l.a.createElement(R.a,{className:i.avatar,src:f.avatar}),l.a.createElement(j.a,{ml:2},l.a.createElement(j.a,{bgcolor:"user"===f.type?"secondary.main":"background.default",color:"user"===f.type?"secondary.contrastText":"text.primary",py:1,px:2,borderRadius:"borderRadius",boxShadow:1},l.a.createElement(_.a,{color:"inherit",component:v.a,to:"#",variant:"h6"},f.name),l.a.createElement(j.a,{mt:1},l.a.createElement(O.a,{color:"inherit",variant:"body1"},t.content))),l.a.createElement(j.a,{mt:1,display:"flex",justifyContent:"flex-end"},l.a.createElement(O.a,{noWrap:!0,color:"textSecondary",variant:"caption"},I()(t.savedAt).fromNow())))),d&&l.a.createElement(L.a,{large:d,onClose:function(){return p(null)}}))},q=t(87),F=t(161),H=t(484),Q=t(889),V=t(1100),Y=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.default,display:"flex",alignItems:"center",padding:e.spacing(1,2)}}}));function Z(e){var a=e.className,t=e.disabled,r=e.add,i=Object(E.a)(e,["className","disabled","add"]),u=Y(),m=Object(s.c)((function(e){return e.account})).user,d=Object(q.useSnackbar)().enqueueSnackbar,p=Object(o.useState)(""),f=Object(G.a)(p,2),b=f[0],h=f[1],v=function(){var e=Object(c.a)(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,b){e.next=3;break}return e.abrupt("return");case 3:a=m.email,r(a,b),h(""),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d("Ooops!",{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return l.a.createElement("div",Object.assign({className:Object(g.a)(u.root,a)},i),l.a.createElement(R.a,{alt:"Person",src:m.avatar}),l.a.createElement(F.a,{variant:"outlined",component:j.a,flexGrow:1,ml:2,p:1},l.a.createElement(H.a,{className:u.input,disableUnderline:!0,fullWidth:!0,value:b,onChange:function(e){e.persist(),h(e.target.value)},onKeyUp:function(e){13===e.keyCode&&v()},placeholder:"Leave a message"})),l.a.createElement(Q.a,{title:"Send"},l.a.createElement("span",null,l.a.createElement(y.a,{color:"secondary",disabled:!b||t,onClick:v},l.a.createElement(k.a,{fontSize:"small"},l.a.createElement(V.a,null))))))}Z.defaultProps={className:"",disabled:!1};var $=Z,ee=Object(u.a)((function(e){return{root:{flexGrow:1,display:"flex",flexDirection:"column",backgroundColor:e.palette.background.dark}}}));var ae=function(e){var a=e.add,t=ee(),r=Object(s.c)((function(e){return e.chat})).threads,n=Object(o.useRef)(null);return Object(o.useEffect)((function(){r&&n.current&&(n.current._container.scrollTop=n.current._container.scrollHeight)}),[r]),r?l.a.createElement("div",{className:t.root},l.a.createElement(B.a,null),l.a.createElement(j.a,{flexGrow:1,p:2,ref:n,component:f.a,options:{suppressScrollX:!0}},r.chating.length>0&&r.chating.map((function(e){return l.a.createElement(X,{key:e._id,thread:e,name:r.name,avatar:r.avatar})}))),l.a.createElement(B.a,null),l.a.createElement($,{add:a})):null},te=t(905),re=Object(u.a)((function(e){return{root:{flexGrow:1,display:"flex",flexDirection:"column",backgroundColor:e.palette.background.dark}}}));var ne=function(){var e=re(),a=Object(s.b)();return l.a.createElement("div",{className:e.root},l.a.createElement(b.a,{smUp:!0},l.a.createElement(j.a,{px:2,py:1,bgcolor:"background.default"},l.a.createElement(y.a,{className:e.menuButton,edge:"start",onClick:function(){a(Object(d.h)())}},l.a.createElement(k.a,{fontSize:"small"},l.a.createElement(te.a,null)))),l.a.createElement(B.a,null)))},ce=t(1090),oe=t(46),le=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",display:"flex",overflow:"hidden",position:"relative",width:"100%"}}})),ie=Object(ce.a)(oe.d,{transports:["websocket"]});a.default=function(){var e=le(),a=Object(s.b)(),t=Object(i.i)().threadKey,r=Object(o.useRef)(null),u=Object(s.c)((function(e){return e.account})).user.email;return Object(o.useEffect)((function(){t&&ie.emit("thread",{userEmail:u,threadKey:t})}),[t,u]),Object(o.useEffect)((function(){ie.emit("start",u)}),[u]),ie.off("getThreads").on("getThreads",function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Object(d.g)(t));case 2:ie.emit("start",u);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),ie.off("getUsers").on("getUsers",(function(e){a(Object(d.f)(e))})),ie.off("findnew").on("findnew",(function(e){e===t?ie.emit("thread",{userEmail:u,threadKey:t}):ie.emit("start",u)})),ie.off("added").on("added",(function(){ie.emit("thread",{userEmail:u,threadKey:t})})),l.a.createElement(m.a,{className:e.root,title:"courses Chat",ref:r},l.a.createElement(z,{containerRef:r}),t?l.a.createElement(ae,{add:function(e,a){ie.emit("addMessage",{userEmail:e,body:a,threadKey:t})}}):l.a.createElement(ne,null))}}}]);
//# sourceMappingURL=53.f4a6ab17.chunk.js.map